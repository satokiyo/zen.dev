---
title: "[èª­æ›¸]è‡ªèµ°ãƒ—ãƒ­ã‚°ãƒ©ãƒžãƒ¼ã€€ï½žPythonã®å…ˆè¼©ãŒæ•™ãˆã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–‹ç™ºã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹120"
emoji: "ðŸ“˜"
type: "idea"#tech:æŠ€è¡“è¨˜äº‹/idea:ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [æœ¬,Python]
published: true
---

https://www.amazon.co.jp/%E8%87%AA%E8%B5%B0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9E%E3%83%BC-Python%E3%81%AE%E5%85%88%E8%BC%A9%E3%81%8C%E6%95%99%E3%81%88%E3%82%8B%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E9%96%8B%E7%99%BA%E3%81%AE%E3%83%99%E3%82%B9%E3%83%88%E3%83%97%E3%83%A9%E3%82%AF%E3%83%86%E3%82%A3%E3%82%B9120-%E6%B8%85%E6%B0%B4%E5%B7%9D-%E8%B2%B4%E4%B9%8B/dp/4297111977

## æ„Ÿæƒ³

Python ã§ã®é–‹ç™ºã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ãŒå®Ÿè·µã«å³ã—ã¦å­¦ã¹ã‚‹ã„ã„æœ¬ã§ã—ãŸã€‚

å€‹äººçš„ã«ã¯ dataclass ã®ä½¿ã„æ–¹ã‚„ãƒ­ã‚°ã€ä¾‹å¤–ã®ã‚ãŸã‚Šã®å†…å®¹ãŒå‹‰å¼·ã«ãªã‚Šã¾ã—ãŸã€‚

å¿˜ã‚Œã¦ã„ãŸçŸ¥è­˜ã¨ã‹ã€ä½¿ãˆãã†ãªãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’ä»¥ä¸‹ã«ãƒ¡ãƒ¢ã—ã¾ã™ã€‚

### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã«æ›´æ–°å¯èƒ½ï¼ˆmutableï¼‰ãªå€¤ã¯æŒ‡å®šã›ãšã€None ã‚’è¨­å®šã™ã‚‹ã€‚

```python
def foo(values=None) -> List[str]:
    values = values or []
    values.append("data")
    return values
```

> å¼•æ•° values ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ç©ºã®ãƒªã‚¹ãƒˆã«ã—ãŸã„å ´åˆã« values=[]ã¨æ›¸ã„ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚Python ã§ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã®å€¤ã¯é–¢æ•°ï¼ˆã‚„ãƒ¡ã‚½ãƒƒãƒ‰ï¼‰å‘¼ã³å‡ºã—ã®ãŸã³ã«åˆæœŸåŒ–ã•ã‚Œã¾ã›ã‚“ã€‚é–¢æ•°ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã§å‘¼ã³å‡ºã™ãŸã³ã«ã€ãƒªã‚¹ãƒˆã®å€¤ãŒå¤‰ã‚ã£ã¦ã—ã¾ã†å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚
> pp.33-34

### ãƒ‡ãƒ¼ã‚¿ãƒ¡ãƒ³ãƒãŒå¤šã„ã‚¯ãƒ©ã‚¹ã¯ dataclass ã‚’ä½¿ã£ã¦å¯èª­æ€§ã‚’ä¸Šã’ã‚‹ã€‚**init**é–¢æ•°ã‚’å®šç¾©ã™ã‚‹ä»£ã‚ã‚Šã« class ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¿”ã™ã€‚

â‡’ ç¢ºã‹ã«ã€**init**()ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶é–¢æ•°ã¯ä¸è¦ã§ã‚ã‚‹å ´åˆãŒçµæ§‹ã‚ã‚‹ã®ã§ã€class ãƒ¡ã‚½ãƒƒãƒ‰ã§åå‰ç©ºé–“ä»˜ãã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’ä½œã£ãŸæ–¹ãŒåˆ†ã‹ã‚Šã‚„ã™ã„æ°—ãŒã™ã‚‹ã€‚

```python
@dataclass
class Config:
    prop1: int
    prop2: int
    ...

    @classmethod
    def from_json( cls, json_path: str) -> Config:
        with open(json_path) as f:
            json_dict = json.loads(f)
            return cls( **json_dict)

```

> \>> 15 ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã‚‹é–¢æ•°ã‚’ã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã«ã™ã‚‹
> p.60

### ä¾‹å¤–ã‚’éš è”½ã—ãªã„ã€‚ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’å‡ºã™ã€‚

> ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã«æœ€ã‚‚ã‚ã‹ã‚Šã‚„ã™ã„å‡ºåŠ›ã¯ã€Python ã®é–‹ç™ºè€…ã«ã¨ã£ã¦ã¯ä¾‹å¤–ã«ã‚ˆã‚‹ãƒˆãƒ¬ãƒ¼ã‚¹ãƒãƒƒã‚¯ã§ã—ã‚‡ã†ã€‚ã‚·ã‚¹ãƒ†ãƒ ä¾‹å¤–ã‚„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€å³åº§ã«ãƒˆãƒ¬ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚’å‡ºåŠ›ã—ã¦ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ã‚¨ãƒ©ãƒ¼çµ‚äº†ã•ã›ã¾ã—ã‚‡ã†ã€‚
> p.273

> æƒ³å®šå¤–ã®ä¾‹å¤–ã¯ except ç¯€ã§æ•ã¾ãˆãšã«ã€ãã®ã¾ã¾é–¢æ•°ã®å‘¼ã³å‡ºã—å…ƒã¾ã§ä¼æ¬ã•ã›ã¾ã—ã‚‡ã†
> p.278

### try ç¯€ã¯çŸ­ã

> try ç¯€ã®ã‚³ãƒ¼ãƒ‰ã¯ã§ãã‚‹ã ã‘çŸ­ãã€1 ã¤ã®ç›®çš„ã«çµžã£ã¦å‡¦ç†ã‚’å®Ÿè£…ã—ã¾ã—ã‚‡ã†ã€‚try ç¯€ã«è¤‡æ•°ã®å‡¦ç†ã‚’æ›¸ã„ã¦ã—ã¾ã†ã¨ã€ç™ºç”Ÿã™ã‚‹ä¾‹å¤–ã®ç¨®é¡žã‚‚æ¯”ä¾‹ã—ã¦å¤šããªã£ã¦ã„ãã€except ç¯€ã§ã„ã‚ã„ã‚ãªä¾‹å¤–å‡¦ç†ãŒå¿…è¦ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚
> p.276

### å°‚ç”¨ ã® ä¾‹å¤– ã‚¯ãƒ©ã‚¹ ã§ ã‚¨ãƒ©ãƒ¼ åŽŸå›  ã‚’ æ˜Žç¤ºã™ã‚‹

```python
class MailReceivingError( Exception):
    pretext = ''

    def __init__( self, message, *args):
        if self. pretext:
            message = f"{ self. pretext}: {message}"
        super().__ init__( message, *args)


    class MailConnectionError( MailReceivingError):
        pretext = 'æŽ¥ç¶š ã‚¨ãƒ©ãƒ¼'

    class MailAuthError( MailReceivingError):
        pretext = 'èªè¨¼ ã‚¨ãƒ©ãƒ¼'

    class MailHeaderError( MailReceivingError):
        pretext = 'ãƒ¡ãƒ¼ãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼ã‚¨ãƒ©ãƒ¼'
```

> p.281

### logger ã«ãƒ­ã‚°ã‚’ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆã—ã¦ã‹ã‚‰æ¸¡ã•ãªã„

```python
def main():
    items = load_ items()
    logger. info(" Number of Items: %s", len( items))
```

> ãƒ­ã‚¬ãƒ¼ã«ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¸¡ã™ã¨ãã¯ã€ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆã—ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚
>
> Python ã®ãƒ­ã‚®ãƒ³ã‚°ã¯å†…éƒ¨çš„ã«ã€Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã¨ã€Œå¼•æ•°ã€ã‚’åˆ†ã‘ã¦ç®¡ç†ã—ã¦ã„ã‚‹ã®ã§ã€åˆ†ã‘ãŸã¾ã¾ãƒ­ã‚°ã«æ®‹ã™ã¹ãã§ã™ã€‚logger.log ã®ç¬¬ä¸€å¼•æ•°ãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ä»¥é™ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«æ¸¡ã•ã‚Œã‚‹å€¤ã«ãªã‚Šã¾ã™ã€‚
> p.298

### ãƒ­ã‚¬ãƒ¼ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ‘ã‚¹**name**ã‚’ä½¿ã£ã¦å–å¾—ã—ã€logging.config.dictConfig.loggers ã«ã¾ã¨ã‚ã¦è¨­å®šã‚’æ›¸ã

```python
import logging
logger = logging. getLogger(__ name__)
```

```python
logging. config. dictConfig({
    ...
    "loggers": {
        "product. views": {},
        "product. management. commands": {},
    }
```

> Python ã§ã¯ã€Œ.ã€åŒºåˆ‡ã‚Šã§ã€Œä¸Šä½ã€ï¼ˆå·¦å´ï¼‰ã®ãƒ­ã‚¬ãƒ¼ãŒé©å¿œã•ã‚Œã¾ã™ã€‚
> (â€¦)
> Python ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã«ã™ã‚‹ã“ã¨ã§ãƒ­ã‚¬ãƒ¼ã®å‘½åè¦å‰‡ã‚’è€ƒãˆã‚‹å¿…è¦ã‚‚ãªããªã‚Šã¾ã™ã€‚ä¸Šä½ã®ãƒ­ã‚¬ãƒ¼ã«å½±éŸ¿ã•ã›ãªã„å ´åˆã¯ propagate ã‚’ False ã«ã—ã¾ã™ã€‚è¨­å®šãŒãªã„å ´åˆã¯å¸¸ã«ä¸Šä½ã®ãƒ­ã‚¬ãƒ¼ã« propagateï¼ˆä¼æ’­ï¼‰ã—ã¦ã„ãã¾ã™ã€‚
> p.301

https://docs.python.org/ja/3/howto/logging.html#logging-flow

### ãƒ­ã‚°ã®å…ˆé ­ã«ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ ID ã‚’å…¥ã‚Œã¦ã€å¾Œã§ grep ã§å–ã‚Šå‡ºã›ã‚‹ã‚ˆã†ã«ã™ã‚‹

> ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚ã¨ã§ grep ã—ãŸã¨ãã«ç›®çš„ã®ãƒ­ã‚°ã ã‘å–ã‚Šå‡ºã›ã‚‹ã‚ˆã†ã«æ„è­˜ã—ã¾ã—ã‚‡ã†ã€‚é‡è¦ãªãƒãƒƒãƒå‡¦ç†ãªã©ã§ã‚ã‚Œã°ã€å‡¦ç†ã”ã¨ã«ã€Œãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ IDã€ã‚’ç™ºè¡Œã—ã¦ã€ãƒ­ã‚°ã®å…ˆé ­ã«å¸¸ã«ã¤ã‘ã‚‹ã¨ã€ã‚ã¨ã§å•é¡Œã®è¿½è·¡èª¿æŸ»ãŒã—ã‚„ã™ããªã‚Šã¾ã™ï¼ˆãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ ID ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ç®¡ç†ã›ãšã¨ã‚‚ã€å‡¦ç†ã®é–‹å§‹æ™‚ã«ç™ºè¡Œã—ãŸ UUID ãªã©ã‚’å¸¸ã«ãƒ­ã‚°å‡ºåŠ›ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã‚‚è‰¯ã„ã§ã™ï¼‰ã€‚
> p.313

### ä¸€æ™‚çš„ãªä½œæ¥­ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆã«ã¯ tempfile ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã†

> tempfile.NamedTemporaryFile ã‚’ä½¿ãˆã°ã€ãƒ•ã‚¡ã‚¤ãƒ«åã®ç«¶åˆã‚’é¿ã‘ã¦ä¸€æ™‚çš„ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã§ãã¾ã™ã€‚
> p.421
